(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e449d49"],{"346e":function(e,t,c){"use strict";c.r(t);var o=c("7a23"),n=Object(o["withScopeId"])("data-v-5d279992");Object(o["pushScopeId"])("data-v-5d279992");var a={ref:"editorContainer"},r={class:"dialog-footer"},s=Object(o["createTextVNode"])("确 定"),i=Object(o["createTextVNode"])("清除"),l={class:"createTest testPaper",style:{width:"100%"}},d={class:""},u={class:"title"},p={class:"testName"},b=Object(o["createVNode"])("br",null,null,-1),j={class:"test-info"},O={class:"test-info"},m={class:"test-info"},f={class:"test-info"},k={class:"test-info"},y={class:"test-info"},V={class:"test-info"},N={class:"test-info"},h={key:0,class:"test-info"},g={key:1,class:"test-info"},v={class:"test-info"},T=Object(o["createTextVNode"])("提交试卷"),B={key:0,class:"title fixed"},x={class:"test-info"},w={class:"testName"},D={class:"test-info"},S={key:0,class:"test-info"},C={key:1,class:"test-info"},_={class:"test-info"},A=Object(o["createTextVNode"])("提交试卷"),I={class:"test-content"},F={class:"topics"},L={key:0,class:"topicsType"},R=Object(o["createVNode"])("div",{class:"_location"},null,-1),U={class:"question"},E={class:"question_nunber"},P={class:"score"},z=Object(o["createTextVNode"])("简单"),q=Object(o["createTextVNode"])("中等"),G=Object(o["createTextVNode"])("困难"),M={class:"score"},$={key:0,class:"radio"},H={key:1,class:"checkbox"},J={key:2,class:"TrueOrFalse"},Q=Object(o["createTextVNode"])("正确"),Y=Object(o["createTextVNode"])("错误"),K={key:3,class:"fillInBlank"},W={key:4,class:""},X={key:5,class:"text"},Z=Object(o["createVNode"])("br",null,null,-1),ee={key:0,class:"topic-nav-describe"},te=Object(o["createVNode"])("span",{class:"topic-nav-but correct"},null,-1),ce=Object(o["createTextVNode"])(" 正确 "),oe=Object(o["createVNode"])("span",{class:"space"},null,-1),ne=Object(o["createVNode"])("span",{class:"topic-nav-but error"},null,-1),ae=Object(o["createTextVNode"])(" 错误 "),re={key:1,class:"topic-nav-describe"},se=Object(o["createVNode"])("span",{class:"topic-nav-but hasAnswer"},null,-1),ie=Object(o["createTextVNode"])(" 已答 "),le=Object(o["createVNode"])("span",{class:"space"},null,-1),de=Object(o["createVNode"])("span",{class:"topic-nav-but "},null,-1),ue=Object(o["createTextVNode"])(" 未答 "),pe={key:0,class:"topic-nav-item"},be={class:"nav-title"},je=Object(o["createVNode"])("i",{class:"el-icon-arrow-up"},null,-1);Object(o["popScopeId"])();var Oe=n((function(e,t,c,Oe,me,fe){var ke=Object(o["resolveComponent"])("el-button"),ye=Object(o["resolveComponent"])("el-dialog"),Ve=Object(o["resolveComponent"])("el-col"),Ne=Object(o["resolveComponent"])("el-tag"),he=Object(o["resolveComponent"])("el-row"),ge=Object(o["resolveComponent"])("el-radio"),ve=Object(o["resolveComponent"])("el-checkbox"),Te=Object(o["resolveComponent"])("el-checkbox-group"),Be=Object(o["resolveComponent"])("el-input");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])(ye,{title:"题目答案",modelValue:me.centerDialogVisible,"onUpdate:modelValue":t[3]||(t[3]=function(e){return me.centerDialogVisible=e}),width:"40%"},{footer:n((function(){return[Object(o["createVNode"])("span",r,[Object(o["createVNode"])(ke,{type:"primary",onClick:t[1]||(t[1]=function(e){return me.centerDialogVisible=!1})},{default:n((function(){return[s]})),_:1}),Object(o["createVNode"])(ke,{type:"danger",onClick:t[2]||(t[2]=function(e){return me.centerDialogVisible=!1,fe.clearFwb()})},{default:n((function(){return[i]})),_:1})])]})),default:n((function(){return[Object(o["createVNode"])("div",a,null,512)]})),_:1},8,["modelValue"]),Object(o["createVNode"])("div",l,[Object(o["createVNode"])("div",d,[Object(o["createVNode"])("div",u,[Object(o["createVNode"])("h3",p,Object(o["toDisplayString"])(me.testData.examName),1),b,Object(o["createVNode"])("ul",null,[Object(o["createVNode"])("li",j,"试卷Id: E"+Object(o["toDisplayString"])(me.testData.examId),1),Object(o["createVNode"])("li",O,"类型: "+Object(o["toDisplayString"])(me.testData.subjectName),1),Object(o["createVNode"])("li",m,"出卷者: "+Object(o["toDisplayString"])(me.testData.creatorName),1),Object(o["createVNode"])("li",f,"答题时间: "+Object(o["toDisplayString"])(me.testData.time)+" 分钟",1),Object(o["createVNode"])("li",k,"题目数量: 共 "+Object(o["toDisplayString"])(me.testData.topicNum)+" 道",1),Object(o["createVNode"])("li",y,"总分: "+Object(o["toDisplayString"])(me.testData.totalScore)+" 分",1),Object(o["createVNode"])("li",V,"及格分数: "+Object(o["toDisplayString"])(me.testData.passMark)+" 分",1)]),Object(o["createVNode"])("ul",null,[Object(o["createVNode"])("li",N,"答题人: "+Object(o["toDisplayString"])(me.user.userName),1),me.finishTest?(Object(o["openBlock"])(),Object(o["createBlock"])("li",h,"得分: "+Object(o["toDisplayString"])(me.testData.userGrade.grade+"分"),1)):(Object(o["openBlock"])(),Object(o["createBlock"])("li",g,"剩余时间: "+Object(o["toDisplayString"])(me.remainTime),1)),Object(o["createVNode"])("li",v,[Object(o["createVNode"])(ke,{type:"primary",size:"mini",onClick:fe.submitTestpaper,disabled:me.isRead},{default:n((function(){return[T]})),_:1},8,["onClick","disabled"])])])]),me.isFixed?(Object(o["openBlock"])(),Object(o["createBlock"])("div",B,[Object(o["createVNode"])("ul",null,[Object(o["createVNode"])("li",x,[Object(o["createVNode"])("strong",w,Object(o["toDisplayString"])(me.testData.examName),1)]),Object(o["createVNode"])("li",D,"答题时间: "+Object(o["toDisplayString"])(me.testData.time)+" 分钟",1),me.finishTest?(Object(o["openBlock"])(),Object(o["createBlock"])("li",S,"得分: "+Object(o["toDisplayString"])(me.testData.userGrade.grade+"分"),1)):(Object(o["openBlock"])(),Object(o["createBlock"])("li",C,"剩余时间: "+Object(o["toDisplayString"])(me.remainTime),1)),Object(o["createVNode"])("li",_,[Object(o["createVNode"])(ke,{type:"primary",size:"mini",onClick:fe.submitTestpaper,disabled:me.isRead},{default:n((function(){return[A]})),_:1},8,["onClick","disabled"])])])])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])("div",I,[Object(o["createVNode"])("div",F,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(me.sortedTopics,(function(t,c){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"topic",key:c},[0!=t.topic_content.length?(Object(o["openBlock"])(),Object(o["createBlock"])("div",L,[Object(o["createVNode"])("h4",null,Object(o["toDisplayString"])(e.bigQuestionName_mixin(t.topicType,c)),1),(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(t.topic_content,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"topic-content",key:t},[R,Object(o["createVNode"])("div",U,[Object(o["createVNode"])(he,null,{default:n((function(){return[Object(o["createVNode"])(Ve,{span:1},{default:n((function(){return[Object(o["createVNode"])("span",E,Object(o["toDisplayString"])(e.index)+"、",1)]})),_:2},1024),Object(o["createVNode"])(Ve,{span:18},{default:n((function(){return[Object(o["createVNode"])("div",{class:"ql-editor",innerHTML:e.question},null,8,["innerHTML"])]})),_:2},1024),Object(o["createVNode"])(Ve,{span:3},{default:n((function(){return[Object(o["createVNode"])("span",P,["简单"===e.difficulty?(Object(o["openBlock"])(),Object(o["createBlock"])(Ne,{key:0,size:"medium",type:"success"},{default:n((function(){return[z]})),_:1})):Object(o["createCommentVNode"])("",!0),"中等"===e.difficulty?(Object(o["openBlock"])(),Object(o["createBlock"])(Ne,{key:1,size:"medium",type:""},{default:n((function(){return[q]})),_:1})):Object(o["createCommentVNode"])("",!0),"困难"===e.difficulty?(Object(o["openBlock"])(),Object(o["createBlock"])(Ne,{key:2,size:"medium",type:"danger"},{default:n((function(){return[G]})),_:1})):Object(o["createCommentVNode"])("",!0)])]})),_:2},1024),Object(o["createVNode"])(Ve,{span:2},{default:n((function(){return[Object(o["createVNode"])("span",M,"("+Object(o["toDisplayString"])(e.score)+"分)",1)]})),_:2},1024)]})),_:2},1024)]),0==e.topicType?(Object(o["openBlock"])(),Object(o["createBlock"])("div",$,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.optionss,(function(t,c){return Object(o["openBlock"])(),Object(o["createBlock"])(ge,{key:c,modelValue:e.userAnswer,"onUpdate:modelValue":function(t){return e.userAnswer=t},label:t,disabled:me.isRead},{default:n((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(String.fromCharCode(65+c))+"、"+Object(o["toDisplayString"])(t),1)]})),_:2},1032,["modelValue","onUpdate:modelValue","label","disabled"])})),128))])):Object(o["createCommentVNode"])("",!0),1==e.topicType?(Object(o["openBlock"])(),Object(o["createBlock"])("div",H,[Object(o["createVNode"])(Te,{modelValue:e.userAnswer,"onUpdate:modelValue":function(t){return e.userAnswer=t}},{default:n((function(){return[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.optionss,(function(t,c){return Object(o["openBlock"])(),Object(o["createBlock"])(ve,{label:t,key:c,disabled:me.isRead,class:fe.isCheckboxCorrect(e,t)},{default:n((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(String.fromCharCode(65+c))+"、"+Object(o["toDisplayString"])(t),1)]})),_:2},1032,["label","disabled","class"])})),128))]})),_:2},1032,["modelValue","onUpdate:modelValue"])])):Object(o["createCommentVNode"])("",!0),2==e.topicType?(Object(o["openBlock"])(),Object(o["createBlock"])("div",J,[Object(o["createVNode"])(ge,{modelValue:e.userAnswer,"onUpdate:modelValue":function(t){return e.userAnswer=t},label:"true",disabled:me.isRead,class:"true"==e.correctAnswer?"correct":"error"},{default:n((function(){return[Q]})),_:2},1032,["modelValue","onUpdate:modelValue","disabled","class"]),Object(o["createVNode"])(ge,{modelValue:e.userAnswer,"onUpdate:modelValue":function(t){return e.userAnswer=t},label:"false",disabled:me.isRead,class:"false"==e.correctAnswer?"correct":"error"},{default:n((function(){return[Y]})),_:2},1032,["modelValue","onUpdate:modelValue","disabled","class"])])):Object(o["createCommentVNode"])("",!0),3==e.topicType?(Object(o["openBlock"])(),Object(o["createBlock"])("div",K,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(fe.fillSymbolStr(e.question),(function(t,c){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{key:c},[c!=fe.fillSymbolStr(e.question).length-1?(Object(o["openBlock"])(),Object(o["createBlock"])(Be,{key:0,type:"textarea",autosize:"",placeholder:"请回答",disabled:me.isRead,modelValue:e.userAnswer[c],"onUpdate:modelValue":function(t){return e.userAnswer[c]=t}},null,8,["disabled","modelValue","onUpdate:modelValue"])):Object(o["createCommentVNode"])("",!0)])})),128))])):Object(o["createCommentVNode"])("",!0),4==e.topicType?(Object(o["openBlock"])(),Object(o["createBlock"])("div",W,[Object(o["createVNode"])(Be,{type:"textarea",modelValue:e.userAnswer,"onUpdate:modelValue":function(t){return e.userAnswer=t},autosize:{minRows:3,maxRows:10},disabled:me.isRead,placeholder:"请回答"},null,8,["modelValue","onUpdate:modelValue","disabled"])])):Object(o["createCommentVNode"])("",!0),5==e.topicType?(Object(o["openBlock"])(),Object(o["createBlock"])("div",X,[Object(o["createVNode"])(Be,{type:"textarea",autosize:"",disabled:me.isRead,placeholder:"点击输入框,填写答案",onClick:function(c){return fe.createCodeFwb(t,e.topicType)}},null,8,["disabled","onClick"]),Z,Object(o["createVNode"])("div",{innerHTML:e.userAnswer},null,8,["innerHTML"])])):Object(o["createCommentVNode"])("",!0)])})),128))])):Object(o["createCommentVNode"])("",!0)])})),128))]),Object(o["createVNode"])("div",{class:["topic-nav ",me.isFixed?"isFixed":""],style:me.topic_nav_style},[me.finishTest?(Object(o["openBlock"])(),Object(o["createBlock"])("div",ee,[te,ce,oe,ne,ae])):(Object(o["openBlock"])(),Object(o["createBlock"])("div",re,[se,ie,le,de,ue])),(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(me.sortedTopics,(function(t,c){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{key:c},[0!=t.topic_content.length?(Object(o["openBlock"])(),Object(o["createBlock"])("div",pe,[Object(o["createVNode"])("div",be,Object(o["toDisplayString"])(e.topicTypeName_mixin(t.topicType)),1),(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(t.topic_content,(function(c,n){return Object(o["openBlock"])(),Object(o["createBlock"])("span",{class:["topic-nav-button",fe.emptyAnswer(c)],onClick:function(e){return fe.topicNav(t.topicType,n)},key:n},Object(o["toDisplayString"])(e.topicNavIndex_mixin(t.topicType,n)),11,["onClick"])})),128))])):Object(o["createCommentVNode"])("",!0)])})),128))],6)]),Object(o["createVNode"])("div",{class:"back-top",onClick:t[4]||(t[4]=function(t){return e.backTop_mixin()})},[je])])])],64)})),me=c("b85c"),fe=(c("ac1f"),c("1276"),c("b0c0"),c("159b"),c("fb6a"),c("d3b7"),c("5295"),c("1989")),ke=c("7864"),ye=c("b775"),Ve=c("14be"),Ne=(c("d514"),{inject:["reload"],name:"TestPaperStu",mixins:[fe["a"]],data:function(){return{examStatus:!1,centerDialogVisible:!1,editors:null,user:{id:0,userName:""},sortedTopics:[{topicType:0,topic_content:[]},{topicType:1,topic_content:[]},{topicType:2,topic_content:[]},{topicType:3,topic_content:[]},{topicType:4,topic_content:[]},{topicType:5,topic_content:[]}],testData:{examClasses:{},userGrade:{}},remainTime:"00:00:00",expendTime:0,isRead:!1,switchPage:0,finishTest:!1,isFixed:!1,topic_nav_style:"top:0px"}},computed:{fillSymbolStr:function(){return function(e){var t=e.split("[]");return t}}},created:function(){var e=this,t=sessionStorage.getItem("phone");ye["a"].post("/user/getUserByPhone",t).then((function(t){e.isToken(t),e.user.id=t.date.id,e.user.userName=t.date.name})),this.getTestPaperData()},mounted:function(){window.addEventListener("scroll",this.handleScroll)},methods:{clearFwb:function(){this.editors.setContents("")},submitTestpaper:function(){for(var e=this,t=sessionStorage.getItem("examId"),c=[],o=0;o<this.testData.topics.length;o++){var n=JSON.parse(JSON.stringify(this.testData.topics[o]));if(null===n.userAnswer||0===n.userAnswer.length)return void this.$message.warning("第".concat(n.index,"题目没有作答"));if((1==n.topicType||3==n.topicType)&&n.userAnswer instanceof Array){var a="";n.userAnswer.forEach((function(e){a+=e+"|"})),n.userAnswer=a.slice(0,-1)}c.push({topicId:n.id,topicType:n.topicType,userId:this.user.id,examId:t,userAnswer:n.userAnswer})}var r={examId:t,examName:this.testData.examName,userName:this.user.userName,userId:this.user.id,answerTime:this.expendTime,userTopicList:c};ye["a"].post("/userGrade/saveUserGrade/",r).then((function(t){e.isToken(t),200==t.code?(ke["b"].success({message:"提交成功！",type:"success"}),e.$router.push("/testPaperList")):ke["b"].warning({message:t.msg,type:"warning"})})).catch((function(e){ke["b"].error("系统异常,提交失败！")}))},getTestPaperData:function(){var e=this,t=sessionStorage.getItem("StudentExamId"),c=sessionStorage.getItem("StudentExamStatus");2==c&&(this.examStatus=!0),ye["a"].post("/exam/editExamDefault",t).then((function(t){e.isToken(t),200==t.code&&e.processTestPaperData(t.date)}))},processTestPaperData:function(e){e.topics.forEach((function(e){null!=e.optionss&&(e.optionss=e.optionss.split("|")),1==e.topicType||3==e.topicType?e.userAnswer=[]:e.userAnswer=""})),this.examStatus?this.isRead=!0:(this.finishTest=!1,this.isRead=!1),this.testData=e,!1===this.finishTest?this.remainTimer():this.isRead=!0;var t,c=this.testData.topics,o=1,n=Object(me["a"])(this.sortedTopics);try{for(n.s();!(t=n.n()).done;)for(var a=t.value,r=0;r<c.length;r++)c[r].topicType==a.topicType&&(c[r].index=o++,a.topic_content.push(c[r]))}catch(s){n.e(s)}finally{n.f()}},remainTimer:function(){var e=this,t=60*this.testData.time,c=setInterval((function(){e.remainTime=e.computateTime(t),t--,e.expendTime++,t<0&&(clearInterval(c),ke["b"].error("考试结束!"),e.submitTestpaper())}),1e3)},computateTime:function(e){var t="00",c="00",o="00";return e>=0&&(t=e%60,t<10&&(t="0"+t)),e/60>=0&&(c=parseInt(e/60%60),c<10&&(c="0"+c)),e/60/60>=0&&(o=parseInt(e/60/60%60),o<10&&(o="0"+o)),o+":"+c+":"+t},handleScroll:function(){var e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;e>154?(this.topic_nav_style="top:"+(e+62)+"px",this.isFixed=!0):this.isFixed=!1},topicNav:function(e,t){var c=this.topicNavIndex_mixin(e,t);document.getElementsByClassName("_location")[c-1].scrollIntoView({behavior:"smooth",block:"start"})},emptyAnswer:function(e){if(!0===this.finishTest)return e.userScore==e.score?"correct":"error";if(3==e.topicType){var t=e.question.split("[]");if(t.length-1!=e.userAnswer.length)return"";var c,o=Object(me["a"])(e.userAnswer);try{for(o.s();!(c=o.n()).done;){var n=c.value;if(""==n)return""}}catch(a){o.e(a)}finally{o.f()}}return 0==e.userAnswer.length?"":"hasAnswer"},isCheckboxCorrect:function(e,t){if(!1===this.finishTest)return"";var c=!1;return e.answer.forEach((function(e){e==t&&(c=!0)})),c?"correct":"error"},isToken:function(e){""===e&&(ke["b"].error("token已过期,请重新登录!"),localStorage.removeItem("token"),sessionStorage.removeItem("phone"),this.$router.push("/"))},createCodeFwb:function(e,t){var c=this,o=this;null!=this.editors&&this.editors.destroy(),this.centerDialogVisible=!0,this.$nextTick((function(){var n=Object(Ve["createEditor"])(c.$refs.editorContainer,{uploader:function(e,t){switch(e){case"image":return o.uploadImage();case"video":ke["b"].error("暂不支持上传视频！");break;case"audio":ke["b"].error("暂不支持上传音频！");break}}}),a=c.sortedTopics[t].topic_content[e].userAnswer;null==a&&void 0==a||n.setContents(a),n.onChange.subscribe((function(){c.sortedTopics[t].topic_content[e].userAnswer=n.getContents().content})),c.editors=n}))},uploadImage:function(){var e=this,t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("accept","image/png, image/jpg, image/jpeg, image/gif"),t.style.cssText="position: absolute; left: -9999px; top: -9999px; opacity: 0";var c=new Promise((function(c){t.addEventListener("change",(function(o){for(var n=new FormData,a=o.target.files,r=0;r<a.length;r++)n.append("file",a[r]);document.body.removeChild(t),ye["a"].post("/file/uploadImage",n).then((function(t){e.isToken(t),200==t.code?(c(t.date),ke["b"].success({message:"上传成功！",type:"success"})):ke["b"].warning({message:t.msg,type:"warning"})})).catch((function(e){ke["b"].error("系统异常,上传失败！")}))}))}));return document.body.appendChild(t),t.click(),c}}}),he=(c("f514"),c("6b0d")),ge=c.n(he);const ve=ge()(Ne,[["render",Oe],["__scopeId","data-v-5d279992"]]);t["default"]=ve},6800:function(e,t,c){},f514:function(e,t,c){"use strict";c("6800")}}]);
//# sourceMappingURL=chunk-1e449d49.0fb54ffe.js.map