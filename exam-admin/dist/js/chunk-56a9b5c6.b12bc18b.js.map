{"version":3,"sources":["webpack:///./src/views/Register.vue?3e6b","webpack:///./src/views/Register.vue","webpack:///./src/views/Register.vue?cea8"],"names":["style","class","mode","success","captchaType","imgSize","ref","model","ruleForm","rules","prop","prefix-icon","name","placeholder","nickName","age","gutter","span","onChange","value","address","sex","label","phone","password","show-password","yzm","append","onShow","disabled","yzmBtn","type","register","resetForm","login","chinaData","ChinaArea","chinaAreaflat","components","Verify","EluiChinaAreaDht","data","city","required","message","trigger","pattern","min","max","msg","flag","addr","methods","this","$refs","validate","valid","registerUser","$encryption","code","request","post","then","res","warning","catch","error","formName","resetFields","$router","push","validateField","err","verify","show","tackBtn","time","timer","setInterval","clearInterval","params","param","URLSearchParams","captchaVerification","a","e","province","county","__exports__","render"],"mappings":"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","file":"js/chunk-56a9b5c6.b12bc18b.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Register.vue?vue&type=style&index=0&id=7292e078&scoped=true&lang=css\"","<template>\n  <Verify mode=\"pop\" @success=\"success\" captchaType='blockPuzzle' :imgSize=\"{width:'400px',height:'200px'}\" ref=\"verify\"></Verify>\n  <!--  captchaType='blockPuzzle' 滑动验证 clickWord 文字验证  -->\n  <div style=\"width:100%;height:100vh;overflow: hidden\" class=\"login\">\n    <!-- overflow:hidden的作用（溢出隐藏、清除浮动、解决外边距塌陷等等） -->\n    <div style=\"width:400px;margin:0px auto\">\n      <div style=\"color: #cccccc;font-size: 30px;text-align: center;padding:30px 0\">注册</div>\n      <el-form ref=\"ruleForm\" :model=\"ruleForm\" :rules=\"rules\">\n        <el-form-item prop=\"name\">\n          <el-input prefix-icon=\"iconfont icon-nicheng\" v-model=\"ruleForm.name\" placeholder=\"请输入昵称\"></el-input>\n        </el-form-item>\n        <el-form-item prop=\"nickName\">\n          <el-input prefix-icon=\"iconfont icon-yonghu\" v-model=\"ruleForm.nickName\" placeholder=\"请输入真实姓名\"></el-input>\n        </el-form-item>\n        <el-form-item prop=\"age\">\n          <el-input prefix-icon=\"iconfont icon-nianling\" v-model=\"ruleForm.age\" placeholder=\"请输入年龄\"></el-input>\n        </el-form-item>\n\n        <el-form-item prop=\"address\">\n          <el-row :gutter=\"20\">\n            <el-col :span=\"13\" style=\"margin-right: -19px\">\n              <elui-china-area-dht @change=\"onChange\" v-model=\"value\"></elui-china-area-dht>\n            </el-col>\n            <el-col :span=\"11\">\n              <el-input style=\"width: 193px;\" prefix-icon=\"iconfont icon-dizhi\" v-model=\"ruleForm.address\" placeholder=\"请输入家庭地址\"></el-input>\n            </el-col>\n          </el-row>\n        </el-form-item>\n\n        <el-form-item prop=\"sex\">\n          <el-select prefix-icon=\"iconfont icon-nianling\" v-model=\"ruleForm.sex\" placeholder=\"请选择性别\" style=\"width:100%\">\n            <el-option label=\"男\" value=\"1\"></el-option>\n            <el-option label=\"女\" value=\"2\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item prop=\"phone\">\n          <el-input prefix-icon=\"iconfont icon-shoujihao\" v-model=\"ruleForm.phone\" placeholder=\"请输入手机号\">\n            <!-- <template #prepend>+86</template> -->\n          </el-input>\n        </el-form-item>\n        <el-form-item prop=\"password\">\n          <el-input prefix-icon=\"iconfont icon-mima\" v-model=\"ruleForm.password\" show-password placeholder=\"请输入密码\"></el-input>\n        </el-form-item>\n        <el-form-item prop=\"yzm\">\n          <el-input prefix-icon=\"iconfont icon-duanxin\" v-model=\"ruleForm.yzm\" placeholder=\"6位短信验证码\">\n            <template #append>\n              <el-button @click=\"onShow()\" :disabled=\"disabled\">{{yzmBtn}}</el-button>\n            </template>\n          </el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button style=\"width:49%\" type=\"primary\" @click=\"register()\">注册</el-button>\n          <el-button style=\"width:48%\" @click=\"resetForm('ruleForm')\">重置</el-button>\n          <el-button @click=\"login()\" type=\"text\">已有账号?去登录</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n  </div>\n\n</template>\n\n<script>\nimport Verify from \"./../components/verifition/Verify\";\nimport { ElMessage } from \"element-plus\";\nimport axios from \"axios\";\nimport request from \"@/utils/request\";\nimport { defineComponent } from \"vue\"; // 参数取值\nimport { EluiChinaAreaDht } from \"elui-china-area-dht\";\nconst chinaData = new EluiChinaAreaDht.ChinaArea().chinaAreaflat;\nexport default {\n  name: \"register\",\n  components: { Verify, EluiChinaAreaDht },\n  data() {\n    return {\n      ruleForm: {\n        phone: \"\",\n        password: \"\",\n        yzm: \"\",\n        name: \"\",\n        nickName: \"\",\n        age: \"\",\n        sex: \"\",\n        address: \"\",\n      },\n      city: \"\",\n      rules: {\n        phone: [\n          { required: true, message: \"请输入手机号\", trigger: \"blur\" },\n          { pattern: /^1[3-9]\\d{9}$/, message: \"手机号格式错误\" },\n        ],\n        yzm: [\n          { required: true, message: \"请输入验证码\", trigger: \"blur\" },\n          { min: 6, max: 6, message: \"请输入6位字符验证码\", trigger: \"blur\" },\n        ],\n        nickName: [\n          { required: true, message: \"请输入真实姓名\", trigger: \"blur\" },\n          { min: 2, max: 18, message: \"请输入2-10位字符\", trigger: \"blur\" },\n        ],\n        name: [\n          { required: true, message: \"请输入昵称\", trigger: \"blur\" },\n          { min: 2, max: 18, message: \"请输入2-18位字符\", trigger: \"blur\" },\n        ],\n        age: [\n          { required: true, message: \"请输入年龄\", trigger: \"blur\" },\n          {\n            pattern: /^(?:[1-9][0-9]?|1[01][0-9]|120)$/,\n            message: \"年龄输入不合法\",\n          },\n        ],\n\n        address: [\n          { required: true, message: \"请输入家庭地址\", trigger: \"blur\" },\n          { min: 2, max: 50, message: \"请输入5-50位字符\", trigger: \"blur\" },\n        ],\n        password: [\n          { required: true, message: \"请输入密码\", trigger: \"blur\" },\n          {\n            pattern:\n              /^(?![a-zA-Z]+$)(?![0-9]+$)(?![._~!@#$^&*]+$)(?![0-9a-zA-Z]+$)(?![0-9._~!@#$^&*]+$)(?![a-zA-Z._~!@#$^&*]+$)[A-Za-z0-9._~!@#$^&*]{6,20}$/,\n            message: \"密码必须由字母、数字、特殊符号组成6-20位字符，区分大小写\",\n          },\n        ],\n      },\n      msg: \"\",\n      flag: false,\n      yzmBtn: \"获取短信验证码\",\n      disabled: false,\n      addr: \"\",\n    };\n  },\n  methods: {\n    register() {\n      //存入地址\n      this.addr = this.ruleForm.address;\n      //注册用户\n      //表单验证\n      this.$refs[\"ruleForm\"].validate((valid) => {\n        if (valid) {\n          //补全地址\n          this.ruleForm.address = this.city + \"|\" + this.ruleForm.address;\n          let registerUser = {\n            name: this.$encryption(this.ruleForm.name),\n            nickName: this.$encryption(this.ruleForm.nickName),\n            age: this.$encryption(this.ruleForm.age),\n            address: this.$encryption(this.ruleForm.address),\n            sex: this.$encryption(this.ruleForm.sex),\n            phone: this.$encryption(this.ruleForm.phone),\n            password: this.$encryption(this.ruleForm.password),\n            code: this.$encryption(this.ruleForm.yzm),\n          };\n          request\n            .post(\"/user/register\", registerUser)\n            .then((res) => {\n              if (res.code == 200) {\n                ElMessage.success({\n                  message: \"注册成功,请登录！\",\n                  type: \"success\",\n                });\n                //调整到登录界面\n                this.login();\n              } else {\n                //注册失败\n                ElMessage.warning({\n                  message: res.msg,\n                  type: \"warning\",\n                });\n                //恢复地址\n                this.ruleForm.address = this.addr;\n              }\n            })\n            .catch((res) => {\n              ElMessage.error(\"系统异常,注册失败！\");\n            });\n        }\n      });\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n    },\n    login() {\n      this.$router.push(\"/login\");\n    },\n    onShow() {\n      if (this.city === \"\") {\n        ElMessage.warning({ message: \"地址未选择!\", type: \"warning\" });\n        return;\n      }\n      //校验表单是否正确\n      this.$refs[\"ruleForm\"].validateField(\n        [\"phone\", \"password\", \"name\", \"age\", \"nickName\", \"address\"],\n        (err) => {\n          if (err) {\n            return;\n          } else {\n            this.$refs.verify.show();\n          }\n        }\n      );\n    },\n    tackBtn() {\n      //验证码倒数60秒\n      let time = 60;\n      let timer = setInterval(() => {\n        if (time == 0) {\n          clearInterval(timer);\n          this.yzmBtn = \"重新获取验证码\";\n          this.disabled = false;\n        } else {\n          this.disabled = true;\n          this.yzmBtn = time + \"秒后重试\";\n          time--;\n        }\n      }, 1000);\n    },\n    success(params) {\n      //判断地址是否选择\n      if (this.city === \"\") {\n        ElMessage.warning({ message: \"地址未选择!\", type: \"warning\" });\n        return;\n      }\n      //方式一\n      let param = new URLSearchParams();\n      param.append(\"captchaVerification\", params.captchaVerification);\n      param.append(\"phone\", this.$encryption(this.ruleForm.phone));\n      axios\n        .post(\"api/captcha/sendMsg\", param)\n        .then((res) => {\n          if (res.data.code == 200) {\n            this.tackBtn();\n            ElMessage.success({\n              message: \"短信发送成功,请注意查收！\",\n              type: \"success\",\n            });\n          } else {\n            ElMessage.warning({\n              message: res.msg,\n              type: \"warning\",\n            });\n          }\n        })\n        .catch((res) => {\n          ElMessage.error(\"系统异常,发送失败！\");\n        });\n    },\n    onChange(e) {\n      const province = chinaData[e[0]].value; //省\n      const city = chinaData[e[1]].value; //城市\n      const county = chinaData[e[2]].value; //县\n      this.city = province + \",\" + city + \",\" + county;\n    },\n  },\n};\n</script>\n\n<style scoped>\n/* 背景图片*/\n.login {\n  background: url(\"../assets/image/xinghe.jpg\");\n  width: 100%;\n  height: 100%;\n  position: fixed;\n  /*margin-top: -65px;上边距*/\n  /*margin-left: -10px;左边距*/\n  background-size: 100% 100%;\n}\n</style>\n","import { render } from \"./Register.vue?vue&type=template&id=7292e078&scoped=true\"\nimport script from \"./Register.vue?vue&type=script&lang=js\"\nexport * from \"./Register.vue?vue&type=script&lang=js\"\n\nimport \"./Register.vue?vue&type=style&index=0&id=7292e078&scoped=true&lang=css\"\n\nimport exportComponent from \"G:\\\\exams\\\\exam-admin\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7292e078\"]])\n\nexport default __exports__"],"sourceRoot":""}