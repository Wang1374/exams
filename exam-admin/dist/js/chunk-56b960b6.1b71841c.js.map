{"version":3,"sources":["webpack:///./src/views/ForgetPassword.vue","webpack:///./src/views/ForgetPassword.vue?a52d","webpack:///./src/views/ForgetPassword.vue?e2cc"],"names":["style","class","mode","success","captchaType","imgSize","ref","model","ruleForm","rules","prop","prefix-icon","nickName","placeholder","phone","yzm","append","onShow","disabled","yzmBtn","type","submit","resetForm","login","ChinaArea","chinaAreaflat","name","components","Verify","EluiChinaAreaDht","data","password","age","sex","address","city","required","message","trigger","pattern","min","max","msg","flag","methods","this","$refs","validate","valid","param","URLSearchParams","$encryption","a","post","then","res","console","log","code","$router","push","warning","catch","error","formName","resetFields","validateField","err","verify","show","tackBtn","time","timer","setInterval","clearInterval","params","captchaVerification","__exports__","render"],"mappings":"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","file":"js/chunk-56b960b6.1b71841c.js","sourcesContent":["<template>\n  <Verify mode=\"pop\" @success=\"success\" captchaType='blockPuzzle' :imgSize=\"{width:'400px',height:'200px'}\" ref=\"verify\"></Verify>\n  <!--  captchaType='blockPuzzle' 滑动验证 clickWord 文字验证  -->\n  <div style=\"width:100%;height:100vh;overflow: hidden\" class=\"login\">\n    <!-- overflow:hidden的作用（溢出隐藏、清除浮动、解决外边距塌陷等等） -->\n    <div style=\"width:400px;margin:0px auto\">\n      <div style=\"color: #cccccc;font-size: 30px;text-align: center;padding:30px 0\">重置密码</div>\n      <el-form ref=\"ruleForm\" :model=\"ruleForm\" :rules=\"rules\">\n        <el-form-item prop=\"nickName\">\n          <el-input prefix-icon=\"iconfont icon-yonghu\" v-model=\"ruleForm.nickName\" placeholder=\"请输入真实姓名\"></el-input>\n        </el-form-item>\n        <el-form-item prop=\"phone\">\n          <el-input prefix-icon=\"iconfont icon-shoujihao\" v-model=\"ruleForm.phone\" placeholder=\"请输入手机号\">\n            <!-- <template #prepend>+86</template> -->\n          </el-input>\n        </el-form-item>\n        <el-form-item prop=\"yzm\">\n          <el-input prefix-icon=\"iconfont icon-duanxin\" v-model=\"ruleForm.yzm\" placeholder=\"6位短信验证码\">\n            <template #append>\n              <el-button @click=\"onShow()\" :disabled=\"disabled\">{{yzmBtn}}</el-button>\n            </template>\n          </el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button style=\"width:49%\" type=\"primary\" @click=\"submit()\">提交</el-button>\n          <el-button style=\"width:48%\" @click=\"resetForm('ruleForm')\">重置</el-button>\n          <el-button @click=\"login()\" type=\"text\">返回登录页面</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n  </div>\n\n</template>\n\n<script>\nimport Verify from \"./../components/verifition/Verify\";\nimport { ElMessage } from \"element-plus\";\nimport axios from \"axios\";\nimport request from \"@/utils/request\";\nimport { defineComponent } from \"vue\"; // 参数取值\nimport { EluiChinaAreaDht } from \"elui-china-area-dht\";\nconst chinaData = new EluiChinaAreaDht.ChinaArea().chinaAreaflat;\nexport default {\n  name: \"ForgetPassword\",\n  components: { Verify, EluiChinaAreaDht },\n  data() {\n    return {\n      ruleForm: {\n        phone: \"\",\n        password: \"\",\n        yzm: \"\",\n        name: \"\",\n        nickName: \"\",\n        age: \"\",\n        sex: \"\",\n        address: \"\",\n      },\n      city: \"\",\n      rules: {\n        phone: [\n          { required: true, message: \"请输入手机号\", trigger: \"blur\" },\n          { pattern: /^1[3-9]\\d{9}$/, message: \"手机号格式错误\" },\n        ],\n        yzm: [\n          { required: true, message: \"请输入验证码\", trigger: \"blur\" },\n          { min: 6, max: 6, message: \"请输入6位字符验证码\", trigger: \"blur\" },\n        ],\n        nickName: [\n          { required: true, message: \"请输入真实姓名\", trigger: \"blur\" },\n          { min: 2, max: 18, message: \"请输入2-10位字符\", trigger: \"blur\" },\n        ],\n      },\n      msg: \"\",\n      flag: false,\n      yzmBtn: \"获取短信验证码\",\n      disabled: false,\n    };\n  },\n  methods: {\n    submit() {\n      //重置密码\n      //表单验证\n      this.$refs[\"ruleForm\"].validate((valid) => {\n        if (valid) {\n          //加密\n          let param = new URLSearchParams();\n          param.append(\"phone\", this.$encryption(this.ruleForm.phone));\n          param.append(\"code\", this.$encryption(this.ruleForm.yzm));\n          axios\n            .post(\"api/user/userResetPassword\", param)\n            .then((res) => {\n              console.log(res);\n              if (res.data.code == 200) {\n                ElMessage.success({\n                  message: \"重置密码成功,跳转至登录页面！\",\n                  type: \"success\",\n                });\n                this.$router.push(\"/login\");\n              } else {\n                ElMessage.warning({\n                  message: res.data.msg,\n                  type: \"warning\",\n                });\n              }\n            })\n            .catch((res) => {\n              ElMessage.error(\"系统异常,发送失败！\");\n            });\n        }\n      });\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n    },\n    login() {\n      this.$router.push(\"/login\");\n    },\n    onShow() {\n      //校验表单是否正确\n      this.$refs[\"ruleForm\"].validateField([\"phone\", \"nickName\"], (err) => {\n        if (err) {\n          return;\n        } else {\n          this.$refs.verify.show();\n        }\n      });\n    },\n    tackBtn() {\n      //验证码倒数60秒\n      let time = 60;\n      let timer = setInterval(() => {\n        if (time == 0) {\n          clearInterval(timer);\n          this.yzmBtn = \"重新获取验证码\";\n          this.disabled = false;\n        } else {\n          this.disabled = true;\n          this.yzmBtn = time + \"秒后重试\";\n          time--;\n        }\n      }, 1000);\n    },\n    success(params) {\n      console.log(\"ok\", params);\n      //方式一\n      let param = new URLSearchParams();\n      param.append(\"captchaVerification\", params.captchaVerification);\n      param.append(\"phone\", this.$encryption(this.ruleForm.phone));\n      param.append(\"nickName\", this.$encryption(this.ruleForm.nickName));\n      axios\n        .post(\"api/captcha/forgetPasswordSendMsg\", param)\n        .then((res) => {\n          console.log(res);\n          if (res.data.code == 200) {\n            this.tackBtn();\n            ElMessage.success({\n              message: \"短信发送成功,请注意查收！\",\n              type: \"success\",\n            });\n          } else {\n            ElMessage.warning({\n              message: res.data.msg,\n              type: \"warning\",\n            });\n          }\n        })\n        .catch((res) => {\n          ElMessage.error(\"系统异常,发送失败！\");\n        });\n    },\n  },\n};\n</script>\n\n<style scoped>\n/* 背景图片*/\n.login {\n  background: url(\"../assets/image/xinghe.jpg\");\n  width: 100%;\n  height: 100%;\n  position: fixed;\n  /*margin-top: -65px;上边距*/\n  /*margin-left: -10px;左边距*/\n  background-size: 100% 100%;\n}\n</style>\n","import { render } from \"./ForgetPassword.vue?vue&type=template&id=43b0dd1a&scoped=true\"\nimport script from \"./ForgetPassword.vue?vue&type=script&lang=js\"\nexport * from \"./ForgetPassword.vue?vue&type=script&lang=js\"\n\nimport \"./ForgetPassword.vue?vue&type=style&index=0&id=43b0dd1a&scoped=true&lang=css\"\n\nimport exportComponent from \"G:\\\\exams\\\\exam-admin\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-43b0dd1a\"]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ForgetPassword.vue?vue&type=style&index=0&id=43b0dd1a&scoped=true&lang=css\""],"sourceRoot":""}