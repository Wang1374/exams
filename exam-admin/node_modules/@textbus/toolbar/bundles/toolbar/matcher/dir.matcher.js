import { dirFormatter } from '@textbus/formatters';
import { FormatMatcher } from './format.matcher';
import { HighlightState } from '../help';
export class DirMatcher extends FormatMatcher {
    constructor(dir, excludeComponents = []) {
        super(dirFormatter, excludeComponents);
        this.dir = dir;
    }
    queryState(selection) {
        if (selection.rangeCount === 0) {
            return {
                srcStates: [],
                matchData: null,
                state: HighlightState.Normal
            };
        }
        const result = super.queryState(selection);
        if (result.state === HighlightState.Highlight) {
            const matchData = result.matchData;
            if (matchData.attrs.get('dir') !== this.dir) {
                result.state = HighlightState.Normal;
            }
        }
        return result;
    }
}
//# sourceMappingURL=dir.matcher.js.map