{"remainingRequest":"G:\\exams\\exam-admin\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!G:\\exams\\exam-admin\\src\\views\\Subject.vue?vue&type=style&index=0&id=6a0b35e2&scoped=true&lang=css","dependencies":[{"path":"G:\\exams\\exam-admin\\src\\views\\Subject.vue","mtime":1638270698717},{"path":"G:\\exams\\exam-admin\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\exams\\exam-admin\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":499162500000},{"path":"G:\\exams\\exam-admin\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"G:\\exams\\exam-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\exams\\exam-admin\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5rZCB7CiAgd2lkdGg6IDEwMCU7Cn0K"},{"version":3,"sources":["G:\\exams\\exam-admin\\src\\views\\Subject.vue"],"names":[],"mappings":";AAoPA,CAAC,CAAC,EAAE;EACF,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACb","file":"G:/exams/exam-admin/src/views/Subject.vue","sourceRoot":"","sourcesContent":["<template>\n  <div style=\"padding:10px;\" class=\"kd\">\n    <div style=\"margin: 10px 0\">\n      <!--功能区域-->\n      <el-button @click=\"addSubject\">添加</el-button>\n      <el-input v-model=\"search\" placeholder=\"请输入类型名称\" style=\"width: 200px;margin-left: 5px\" clearable></el-input>\n      <el-button type=\"primary\" style=\"margin-left: 5px\" @click=\"load\" icon=\"el-icon-search\">查询</el-button>\n    </div>\n    <el-table :data=\"tableData\" border stripe style=\"width: 99%\" v-loading=\"loading\">\n      <el-table-column :width=\"cloumWidth.id\" label=\"序号\" type=\"index\" show-overflow-tooltip>\n      </el-table-column>\n      <el-table-column prop=\"id\" label=\"ID\" v-if=\"false\">\n      </el-table-column>\n      <el-table-column prop=\"subjectName\" label=\"类型名称\" :width=\"cloumWidth.subjectName\">\n      </el-table-column>\n      <el-table-column prop=\"createUserName\" label=\"创建人\" :width=\"cloumWidth.createUserName\">\n      </el-table-column>\n      <el-table-column prop=\"createTime\" label=\"创建时间\" :width=\"cloumWidth.createTime\">\n      </el-table-column>\n      <el-table-column prop=\"updateUserName\" label=\"修改人\" :width=\"cloumWidth.updateUserName\">\n      </el-table-column>\n      <el-table-column prop=\"updateTime\" label=\"修改时间\" :width=\"cloumWidth.updateTime\">\n      </el-table-column>\n      <el-table-column label=\"操作\" :width=\"cloumWidth.cz\">\n        <template #default=\"scope\">\n          <el-button size=\"small\" type=\"text\" @click=\"handleEdit(scope.row)\" icon=\"el-icon-edit\">编辑</el-button>\n          <el-popconfirm title=\"你确定要删除吗？\" @confirm=\"handleDelete(scope.row.id)\">\n            <template #reference>\n              <el-button size=\"small\" type=\"text\" icon=\"el-icon-delete\">删除</el-button>\n            </template>\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n    </el-table>\n    <div style=\"margin: 10px 0\">\n      <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page=\"currentPage\" :page-sizes=\"[5, 10, 15, 20]\" :page-size=\"pageSize\" layout=\"total, sizes, prev, pager, next, jumper\" :total=\"total\">\n      </el-pagination>\n      <!--弹出框-->\n      <el-dialog :title=\"title\" v-model=\"dialogVisible\" width=\"30%\">\n        <el-form :model=\"form\" label-width=\"70px\">\n          <el-form-item label=\"类型名称\">\n            <el-input v-model=\"form.subjectName\" style=\"width: 80%\"></el-input>\n          </el-form-item>\n        </el-form>\n        <template #footer>\n          <span class=\"dialog-footer\">\n            <el-button @click=\"dialogVisible = false\">取 消</el-button>\n            <el-button type=\"primary\" @click=\"dialogVisible = false,dialog()\">确 定</el-button>\n          </span>\n        </template>\n      </el-dialog>\n    </div>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\nimport request from \"@/utils/request\";\nimport { ElMessage } from \"element-plus\";\n\nexport default {\n  name: \"Home\",\n  components: {},\n  data() {\n    return {\n      loading: false,\n      form: {},\n      dialogVisible: false,\n      tableData: [],\n      useYnValue: \"\",\n      currentPage: 1,\n      pageSize: 10,\n      total: 0,\n      search: \"\",\n      cloumWidth: {\n        id: \"50\",\n        createUserName: \"100\",\n        createTime: \"170\",\n        updateUserName: \"100\",\n        updateTime: \"170\",\n        cz: \"180\",\n      },\n    };\n  },\n  created() {\n    this.load();\n    this.defaultTableWith();\n  },\n  mounted() {\n    this.$nextTick(() => {\n      window.addEventListener(\"resize\", () => {\n        //监听浏览器窗口大小改变\n        //浏览器变化执行动作\n        //初始化表格宽度\n        this.defaultTableWith();\n      });\n    });\n  },\n  methods: {\n    //初始化表格宽度\n    defaultTableWith() {\n      let width = document.body.clientWidth - 241; //表格宽度\n      let kd = [100, 150, 210, 150, 210, 250];\n      let data = this.cloumWidth;\n      var i = 0;\n      for (var key in data) {\n        this.cloumWidth[key] = parseInt((kd[i] / 1295) * width);\n        i++;\n      }\n    },\n    load() {\n      this.loading = true;\n      request\n        .get(\"/subject/getExamSubjectAll\", {\n          params: {\n            pageNumber: this.currentPage,\n            pageSize: this.pageSize,\n            search: this.search,\n          },\n        })\n        .then((res) => {\n          //判断token是否过期\n          this.isToken(res);\n          this.tableData = res.date.records; //初始化表格数据\n          this.total = res.date.total; //初始化总条数\n          this.loading = false;\n        });\n    },\n    addSubject() {\n      this.title = \"添加类型\";\n      this.dialogVisible = true;\n      this.form = {};\n    },\n    update() {\n      //更新数据\n      request\n        .put(\"/subject/updateSubjectName\", this.form)\n        .then((res) => {\n          //判断token是否过期\n          this.isToken(res);\n          if (res.code == 200) {\n            ElMessage.success({\n              message: \"更新成功！\",\n              type: \"success\",\n            });\n            this.load();\n          } else {\n            ElMessage.warning({\n              message: res.msg,\n              type: \"warning\",\n            });\n          }\n        })\n        .catch((res) => {\n          ElMessage.error(\"系统异常,更新失败！\");\n        });\n    },\n    //新增\n    save() {\n      this.dialogVisible = false;\n      request\n        .post(\"/subject/addSubject/\" + this.form.subjectName)\n        .then((res) => {\n          //判断token是否过期\n          this.isToken(res);\n          if (res.code == 200) {\n            ElMessage.success({\n              message: \"添加成功！\",\n              type: \"success\",\n            });\n            this.load();\n          } else {\n            ElMessage.warning({\n              message: res.msg,\n              type: \"warning\",\n            });\n          }\n        })\n        .catch((res) => {\n          ElMessage.error(\"系统异常,添加失败！\");\n        });\n    },\n    handleSizeChange(pageSize) {\n      //改变当前每页的个数触发\n      this.pageSize = pageSize;\n      this.load();\n    },\n    handleCurrentChange(pageNumber) {\n      //改变当前页码触发\n      this.currentPage = pageNumber;\n      this.load();\n    },\n    handleDelete(id) {\n      //删除数据\n      request\n        .delete(\"/subject/deleteSubject/\" + id)\n        .then((res) => {\n          //判断token是否过期\n          this.isToken(res);\n          if (res.code == 200) {\n            ElMessage.success({\n              message: \"删除成功！\",\n              type: \"success\",\n            });\n            this.load();\n          } else {\n            ElMessage.warning({\n              message: res.msg,\n              type: \"warning\",\n            });\n          }\n        })\n        .catch((res) => {\n          ElMessage.error(\"系统异常,删除失败！\");\n        });\n    },\n    handleEdit(row) {\n      this.title = \"编辑类型\";\n      this.dialogVisible = true;\n      this.form = JSON.parse(JSON.stringify(row));\n    },\n    dialog() {\n      if (this.form.id) {\n        //存在id则更新\n        this.update();\n      } else {\n        this.save();\n      }\n    },\n    isToken(res) {\n      if (res === \"\") {\n        ElMessage.error(\"token已过期,请重新登录!\");\n        //清空token\n        localStorage.removeItem(\"token\");\n        //清除session\n        sessionStorage.removeItem(\"phone\");\n        //跳转登录页面\n        this.$router.push(\"/\");\n      }\n    },\n  },\n};\n</script>\n<style scoped>\n.kd {\n  width: 100%;\n}\n</style>"]}]}