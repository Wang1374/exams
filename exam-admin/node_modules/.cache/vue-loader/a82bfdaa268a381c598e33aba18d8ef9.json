{"remainingRequest":"/Users/sw/Documents/examSystem/exams/exam-admin/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/sw/Documents/examSystem/exams/exam-admin/src/views/ReationList.vue?vue&type=style&index=0&id=122b0016&scoped=true&lang=css","dependencies":[{"path":"/Users/sw/Documents/examSystem/exams/exam-admin/src/views/ReationList.vue","mtime":1637309897625},{"path":"/Users/sw/Documents/examSystem/exams/exam-admin/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/sw/Documents/examSystem/exams/exam-admin/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":499162500000},{"path":"/Users/sw/Documents/examSystem/exams/exam-admin/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/sw/Documents/examSystem/exams/exam-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/sw/Documents/examSystem/exams/exam-admin/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5rZCB7CiAgd2lkdGg6IDEwMCU7Cn0K"},{"version":3,"sources":["/Users/sw/Documents/examSystem/exams/exam-admin/src/views/ReationList.vue"],"names":[],"mappings":";AAkMA,CAAC,CAAC,EAAE;EACF,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACb","file":"/Users/sw/Documents/examSystem/exams/exam-admin/src/views/ReationList.vue","sourceRoot":"","sourcesContent":["<template>\n  <div style=\"padding:10px;\" class=\"kd\">\n    <div style=\"margin: 10px 0\">\n      <el-input v-model=\"search\" placeholder=\"请输入题目名称\" style=\"width: 200px;margin-left: 5px\" clearable></el-input>\n      <el-button type=\"primary\" style=\"margin-left: 5px\" @click=\"load\" icon=\"el-icon-search\">查询</el-button>\n    </div>\n    <el-table :data=\"tableData\" border stripe style=\"width: 99%\" v-loading=\"loading\">\n      <el-table-column :width=\"cloumWidth.id\" label=\"序号\" type=\"index\" show-overflow-tooltip>\n      </el-table-column>\n      <el-table-column prop=\"id\" label=\"ID\" v-if=\"false\">\n      </el-table-column>\n      <el-table-column prop=\"topicType\" label=\"类别\" :width=\"cloumWidth.topicType\">\n        <template v-slot=\"scope\">\n          <!-- /0 单选题  1 多选题  2判断题 3填空题 4 简答题 5 代码题 -->\n          <span v-if=\"scope.row.topicType===0\">单选题</span>\n          <span v-if=\"scope.row.topicType===1\">多选题</span>\n          <span v-if=\"scope.row.topicType===2\">判断题</span>\n          <span v-if=\"scope.row.topicType===3\">填空题</span>\n          <span v-if=\"scope.row.topicType===4\">简答题</span>\n          <span v-if=\"scope.row.topicType===5\">代码题</span>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"examName\" label=\"试卷名称\" :width=\"cloumWidth.examName\">\n      </el-table-column>\n      <el-table-column prop=\"topicName\" label=\"题目名称\" :width=\"cloumWidth.topicName\" :show-overflow-tooltip=\"true\">\n      </el-table-column>\n    </el-table>\n    <div style=\"margin: 10px 0\">\n      <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page=\"currentPage\" :page-sizes=\"[5, 10, 15, 20]\" :page-size=\"pageSize\" layout=\"total, sizes, prev, pager, next, jumper\" :total=\"total\">\n      </el-pagination>\n    </div>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\nimport request from \"@/utils/request\";\nimport { ElMessage } from \"element-plus\";\n\nexport default {\n  name: \"Home\",\n  components: {},\n  data() {\n    return {\n      loading: false,\n      form: {},\n      dialogVisible: false,\n      tableData: [],\n      useYnValue: \"\",\n      currentPage: 1,\n      pageSize: 10,\n      total: 0,\n      search: \"\",\n      cloumWidth: {\n        id: \"50\",\n        topicType: \"70\",\n        examName: \"50\",\n        topicName: \"50\",\n      },\n    };\n  },\n  created() {\n    this.load();\n    this.defaultTableWith();\n  },\n  mounted() {\n    this.$nextTick(() => {\n      window.addEventListener(\"resize\", () => {\n        //监听浏览器窗口大小改变\n        //浏览器变化执行动作\n        //初始化表格宽度\n        this.defaultTableWith();\n      });\n    });\n  },\n  methods: {\n    //初始化表格宽度\n    defaultTableWith() {\n      let width = document.body.clientWidth - 241; //表格宽度\n      let kd = [100, 150, 300];\n      let data = this.cloumWidth;\n      var i = 0;\n      for (var key in data) {\n        this.cloumWidth[key] = parseInt((kd[i] / 1295) * width);\n        i++;\n      }\n    },\n    load() {\n      request\n        .get(\"/reation/getReationAll\", {\n          params: {\n            pageNumber: this.currentPage,\n            pageSize: this.pageSize,\n            search: this.search,\n          },\n        })\n        .then((res) => {\n          this.isToken(res);\n          this.tableData = res.date.records; //初始化表格数据\n          this.total = res.date.total; //初始化总条数\n        });\n    },\n    update(id, yn) {\n      //更新试卷状态\n      request\n        .post(\"/exam/updateReleaseYn/\" + id + \"/\" + yn)\n        .then((res) => {\n          if (res.code == 200) {\n            ElMessage.success({\n              message: \"更新成功！\",\n              type: \"success\",\n            });\n            this.load();\n          } else {\n            ElMessage.warning({\n              message: res.msg,\n              type: \"warning\",\n            });\n          }\n        })\n        .catch((res) => {\n          ElMessage.error(\"系统异常,更新失败！\");\n        });\n    },\n    handleSizeChange(pageSize) {\n      //改变当前每页的个数触发\n      this.pageSize = pageSize;\n      this.load();\n    },\n    handleCurrentChange(pageNumber) {\n      //改变当前页码触发\n      this.currentPage = pageNumber;\n      this.load();\n    },\n    handleDelete(id) {\n      //删除用户\n      request\n        .delete(\"/exam/deleteExam/\" + id)\n        .then((res) => {\n          if (res.code == 200) {\n            ElMessage.success({\n              message: \"删除成功！\",\n              type: \"success\",\n            });\n            this.load();\n          } else {\n            ElMessage.warning({\n              message: res.msg,\n              type: \"warning\",\n            });\n          }\n        })\n        .catch((res) => {\n          ElMessage.error(\"系统异常,删除失败！\");\n        });\n    },\n    release(id, releaseYn) {\n      let j = 0;\n      if (releaseYn == 0) {\n        j = 1;\n      }\n      let data = this.tableData;\n      for (let i = 0; i < data.length; i++) {\n        if (data[i].id == id) {\n          this.tableData[i].releaseYn = j;\n          this.update(id, j);\n        }\n      }\n    },\n    isToken(res) {\n      if (res === \"\") {\n        ElMessage.error(\"token已过期,请重新登录!\");\n        //清空token\n        localStorage.removeItem(\"token\");\n        //清除session\n        sessionStorage.removeItem(\"phone\");\n        //跳转登录页面\n        this.$router.push(\"/\");\n      }\n    },\n    formatterType(row, column) {\n      let type;\n      let types = row.topicType;\n      if (types === 0) {\n        type = \"单选题\";\n      } else if (types === 1) {\n        type = \"多选题\";\n      }\n      return row.topicType === 1 ? \"男\" : \"女\";\n    },\n  },\n};\n</script>\n<style scoped>\n.kd {\n  width: 100%;\n}\n</style>"]}]}