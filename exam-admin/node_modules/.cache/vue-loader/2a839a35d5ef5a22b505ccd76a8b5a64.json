{"remainingRequest":"G:\\exams\\exam-admin\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!G:\\exams\\exam-admin\\src\\components\\verifition\\Verify\\VerifyPoints.vue?vue&type=template&id=32e1805f","dependencies":[{"path":"G:\\exams\\exam-admin\\src\\components\\verifition\\Verify\\VerifyPoints.vue","mtime":1636551969000},{"path":"G:\\exams\\exam-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\exams\\exam-admin\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\exams\\exam-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"G:\\exams\\exam-admin\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":499162500000},{"path":"G:\\exams\\exam-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\exams\\exam-admin\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgICA8ZGl2IHN0eWxlPSJwb3NpdGlvbjogcmVsYXRpdmUiCiAgICAgICAgPgogICAgICAgIDxkaXYgY2xhc3M9InZlcmlmeS1pbWctb3V0Ij4KICAgICAgICAgICAgPGRpdiBjbGFzcz0idmVyaWZ5LWltZy1wYW5lbCIgOnN0eWxlPSJ7J3dpZHRoJzogc2V0U2l6ZS5pbWdXaWR0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2hlaWdodCc6IHNldFNpemUuaW1nSGVpZ2h0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYmFja2dyb3VuZC1zaXplJyA6IHNldFNpemUuaW1nV2lkdGggKyAnICcrIHNldFNpemUuaW1nSGVpZ2h0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbWFyZ2luLWJvdHRvbSc6IHZTcGFjZSArICdweCd9IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idmVyaWZ5LXJlZnJlc2giIHN0eWxlPSJ6LWluZGV4OjMiIEBjbGljaz0icmVmcmVzaCIgdi1zaG93PSJzaG93UmVmcmVzaCI+CiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9Imljb25mb250IGljb24tcmVmcmVzaCI+PC9pPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8aW1nIDpzcmM9IidkYXRhOmltYWdlL3BuZztiYXNlNjQsJytwb2ludEJhY2tJbWdCYXNlIiAKICAgICAgICAgICAgICAgIHJlZj0iY2FudmFzIgogICAgICAgICAgICAgICAgYWx0PSIiICBzdHlsZT0id2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtkaXNwbGF5OmJsb2NrIgogICAgICAgICAgICAgICAgQGNsaWNrPSJiaW5kaW5nQ2xpY2s/Y2FudmFzQ2xpY2soJGV2ZW50KTp1bmRlZmluZWQiPgoKICAgICAgICAgICAgICAgIDxkaXYgdi1mb3I9Iih0ZW1wUG9pbnQsIGluZGV4KSBpbiB0ZW1wUG9pbnRzIiA6a2V5PSJpbmRleCIgY2xhc3M9InBvaW50LWFyZWEiCiAgICAgICAgICAgICAgICAgICAgIDpzdHlsZT0iewogICAgICAgICAgICAgICAgICAgICAgICAnYmFja2dyb3VuZC1jb2xvcic6JyMxYWJkNmMnLAogICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjonI2ZmZicsCiAgICAgICAgICAgICAgICAgICAgICAgICd6LWluZGV4Jzo5OTk5LAogICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDonMjBweCcsCiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDonMjBweCcsCiAgICAgICAgICAgICAgICAgICAgICAgICd0ZXh0LWFsaWduJzonY2VudGVyJywKICAgICAgICAgICAgICAgICAgICAgICAgJ2xpbmUtaGVpZ2h0JzonMjBweCcsCiAgICAgICAgICAgICAgICAgICAgICAgICdib3JkZXItcmFkaXVzJzogJzUwJScsCiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOidhYnNvbHV0ZScsCiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDpwYXJzZUludCh0ZW1wUG9pbnQueS0xMCkgKyAncHgnLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OnBhcnNlSW50KHRlbXBQb2ludC54LTEwKSArICdweCcKICAgICAgICAgICAgICAgICAgICAgfSI+CiAgICAgICAgICAgICAgICAgICAge3tpbmRleCArIDF9fQogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDwhLS0gJ2hlaWdodCc6IHRoaXMuYmFyU2l6ZS5oZWlnaHQsIC0tPgogICAgICAgIDxkaXYgY2xhc3M9InZlcmlmeS1iYXItYXJlYSIKICAgICAgICAgICAgIDpzdHlsZT0ieyd3aWR0aCc6IHNldFNpemUuaW1nV2lkdGgsCiAgICAgICAgICAgICAgICAgICAgICAnY29sb3InOiB0aGlzLmJhckFyZWFDb2xvciwKICAgICAgICAgICAgICAgICAgICAgICdib3JkZXItY29sb3InOiB0aGlzLmJhckFyZWFCb3JkZXJDb2xvciwKICAgICAgICAgICAgICAgICAgICAgICdsaW5lLWhlaWdodCc6dGhpcy5iYXJTaXplLmhlaWdodH0iPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0idmVyaWZ5LW1zZyI+e3t0ZXh0fX08L3NwYW4+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4K"},{"version":3,"sources":["G:\\exams\\exam-admin\\src\\components\\verifition\\Verify\\VerifyPoints.vue"],"names":[],"mappings":";IACI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC1B;QACA,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACvB,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;mDACzB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;mDAC3B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;mDAC7D,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;oDAC9B;gBACpC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC/E,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACxC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACL,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACpD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACX,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACnD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CA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C,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;sBACzB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;sBAC1B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;sBACvC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAC7C,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC3C,CAAC,CAAC,CAAC,CAAC,CAAC;IACT,CAAC,CAAC,CAAC,CAAC,CAAC","file":"G:/exams/exam-admin/src/components/verifition/Verify/VerifyPoints.vue","sourceRoot":"","sourcesContent":["<template>\n    <div style=\"position: relative\"\n        >\n        <div class=\"verify-img-out\">\n            <div class=\"verify-img-panel\" :style=\"{'width': setSize.imgWidth,\n                                                   'height': setSize.imgHeight,\n                                                   'background-size' : setSize.imgWidth + ' '+ setSize.imgHeight,\n                                                   'margin-bottom': vSpace + 'px'}\"\n                                                    >\n                <div class=\"verify-refresh\" style=\"z-index:3\" @click=\"refresh\" v-show=\"showRefresh\">\n                    <i class=\"iconfont icon-refresh\"></i>\n                </div>\n                <img :src=\"'data:image/png;base64,'+pointBackImgBase\" \n                ref=\"canvas\"\n                alt=\"\"  style=\"width:100%;height:100%;display:block\"\n                @click=\"bindingClick?canvasClick($event):undefined\">\n\n                <div v-for=\"(tempPoint, index) in tempPoints\" :key=\"index\" class=\"point-area\"\n                     :style=\"{\n                        'background-color':'#1abd6c',\n                        color:'#fff',\n                        'z-index':9999,\n                        width:'20px',\n                        height:'20px',\n                        'text-align':'center',\n                        'line-height':'20px',\n                        'border-radius': '50%',\n                        position:'absolute',\n                        top:parseInt(tempPoint.y-10) + 'px',\n                        left:parseInt(tempPoint.x-10) + 'px'\n                     }\">\n                    {{index + 1}}\n                </div>\n            </div>\n        </div>\n        <!-- 'height': this.barSize.height, -->\n        <div class=\"verify-bar-area\"\n             :style=\"{'width': setSize.imgWidth,\n                      'color': this.barAreaColor,\n                      'border-color': this.barAreaBorderColor,\n                      'line-height':this.barSize.height}\">\n            <span class=\"verify-msg\">{{text}}</span>\n        </div>\n    </div>\n</template>\n<script type=\"text/babel\">\n    /**\n     * VerifyPoints\n     * @description 点选\n     * */\n    import {resetSize, _code_chars, _code_color1, _code_color2} from './../utils/util'\n    import {aesEncrypt} from \"./../utils/ase\"\n    import {reqGet,reqCheck}  from \"./../api/index\"\n    import { computed, onMounted, reactive, ref,watch,nextTick,toRefs, watchEffect,getCurrentInstance} from 'vue';\n    export default {\n        name: 'VerifyPoints',\n        props: {\n            //弹出式pop，固定fixed\n            mode: {\n                type: String,\n                default: 'fixed'\n            },\n            captchaType:{\n                type:String,\n            },\n            //间隔\n            vSpace: {\n                type: Number,\n                default: 5\n            },\n            imgSize: {\n                type: Object,\n                default() {\n                    return {\n                        width: '310px',\n                        height: '155px'\n                    }\n                }\n            },\n            barSize: {\n                type: Object,\n                default() {\n                    return {\n                        width: '310px',\n                        height: '40px'\n                    }\n                }\n            }\n        },\n        setup(props,context){\n            const {mode,captchaType,vSpace,imgSize,barSize} = toRefs(props)\n            const { proxy } = getCurrentInstance();\n            let secretKey = ref(''),           //后端返回的ase加密秘钥\n                checkNum = ref(3),             //默认需要点击的字数\n                fontPos = reactive([]),            //选中的坐标信息\n                checkPosArr = reactive([]),        //用户点击的坐标\n                num = ref(1),                 //点击的记数\n                pointBackImgBase = ref(''),    //后端获取到的背景图片\n                poinTextList = reactive([]),        //后端返回的点击字体顺序\n                backToken = ref(''),           //后端返回的token值\n                setSize = reactive({\n                    imgHeight: 0,\n                    imgWidth: 0,\n                    barHeight: 0,\n                    barWidth: 0\n                }),\n                tempPoints = reactive([]),\n                text = ref(''),\n                barAreaColor = ref(undefined),\n                barAreaBorderColor = ref(undefined),\n                showRefresh = ref(true),\n                bindingClick = ref(true)\n\n                \n               \n\n                const init = ()=>{\n                    //加载页面\n                    fontPos.splice(0, fontPos.length)\n                    checkPosArr.splice(0, checkPosArr.length)\n                    num.value = 1\n                    getPictrue();\n                    nextTick(() => {\n                        let {imgHeight,imgWidth,barHeight,barWidth} = resetSize(proxy)\n                        setSize.imgHeight = imgHeight\n                        setSize.imgWidth = imgWidth\n                        setSize.barHeight = barHeight\n                        setSize.barWidth = barWidth\n                        proxy.$parent.$emit('ready', proxy)\n                    })\n                }\n                 onMounted(()=>{\n                    // 禁止拖拽\n                    init()\n                    proxy.$el.onselectstart = function () {\n                        return false\n                    }\n                })\n                const canvas = ref(null)\n                const canvasClick = (e)=>{\n                    checkPosArr.push(getMousePos(canvas, e));\n                    if (num.value == checkNum.value) {\n                        num.value = createPoint(getMousePos(canvas, e));\n                        //按比例转换坐标值\n                        let arr = pointTransfrom(checkPosArr,setSize)\n                        checkPosArr.length = 0\n                        checkPosArr.push(...arr);\n                        //等创建坐标执行完\n                        setTimeout(() => {\n                            // var flag = this.comparePos(this.fontPos, this.checkPosArr);\n                            //发送后端请求\n                            var captchaVerification = secretKey.value? aesEncrypt(backToken.value+'---'+JSON.stringify(checkPosArr),secretKey.value):backToken.value+'---'+JSON.stringify(checkPosArr)\n                            let data = {\n                                captchaType:captchaType.value,\n                                \"pointJson\":secretKey.value? aesEncrypt(JSON.stringify(checkPosArr),secretKey.value):JSON.stringify(checkPosArr),\n                                \"token\":backToken.value\n                            }\n                            reqCheck(data).then(res=>{\n                                if (res.repCode == \"0000\") {\n                                    barAreaColor.value = '#4cae4c'\n                                    barAreaBorderColor.value = '#5cb85c'\n                                    text.value = '验证成功'\n                                    bindingClick.value = false\n                                    if (mode.value=='pop') {\n                                        setTimeout(()=>{\n                                            proxy.$parent.clickShow = false;\n                                            refresh();\n                                        },1500)\n                                    }\n                                    proxy.$parent.$emit('success', {captchaVerification})\n                                }else{\n                                    proxy.$parent.$emit('error', proxy)\n                                    barAreaColor.value = '#d9534f'\n                                    barAreaBorderColor.value = '#d9534f'\n                                    text.value = '验证失败'\n                                    setTimeout(() => {\n                                        refresh();\n                                    }, 700);\n                                }\n                            })\n                        }, 400);\n                    }\n                    if (num.value < checkNum.value) {\n                        num.value = createPoint(getMousePos(canvas, e));\n                    }\n                }\n                 //获取坐标\n                const getMousePos = function (obj, e) {\n                    var x = e.offsetX \n                    var y = e.offsetY \n                    return {x, y}\n                }\n                //创建坐标点\n                const createPoint = function (pos) {\n                    tempPoints.push(Object.assign({}, pos))\n                    return num.value+1;\n                }\n                const refresh = function () {\n                    tempPoints.splice(0, tempPoints.length)\n                    barAreaColor.value = '#000'\n                    barAreaBorderColor.value = '#ddd'\n                    bindingClick.value = true\n                    fontPos.splice(0, fontPos.length)\n                    checkPosArr.splice(0, checkPosArr.length)\n                    num.value = 1\n                    getPictrue();\n                    text.value = '验证失败'\n                    showRefresh.value = true\n                }\n\n                // 请求背景图片和验证图片\n                function getPictrue() {\n                    let data = {\n                        captchaType:captchaType.value\n                    }\n                    reqGet(data).then(res=>{\n                        if (res.repCode == \"0000\") {\n                            pointBackImgBase.value = res.repData.originalImageBase64\n                            backToken.value = res.repData.token\n                            secretKey.value = res.repData.secretKey\n                            poinTextList.value = res.repData.wordList\n                            text.value = '请依次点击【' + poinTextList.value.join(\",\") + '】'\n                        }else{\n                            text.value = res.repMsg;\n                        }\n                    })\n                }\n                //坐标转换函数\n                const pointTransfrom = function(pointArr,imgSize){\n                    var newPointArr = pointArr.map(p=>{\n                        let x = Math.round(310 * p.x/parseInt(imgSize.imgWidth)) \n                        let y =Math.round(155 * p.y/parseInt(imgSize.imgHeight)) \n                        return {x,y}\n                    })\n                    return newPointArr\n                }\n                return {\n                    secretKey,\n                    checkNum,\n                    fontPos,\n                    checkPosArr,\n                    num,\n                    pointBackImgBase,\n                    poinTextList,\n                    backToken,\n                    setSize,\n                    tempPoints,\n                    text,\n                    barAreaColor,\n                    barAreaBorderColor,\n                    showRefresh,\n                    bindingClick,\n                    init,\n                    canvas,\n                    canvasClick,\n                    getMousePos,createPoint,refresh,getPictrue,pointTransfrom\n                }\n        },\n    }\n</script>"]}]}